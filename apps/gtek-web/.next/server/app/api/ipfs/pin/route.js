"use strict";(()=>{var e={};e.id=646,e.ids=[646],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},2241:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},5645:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>A,patchFetch:()=>T,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>E,staticGenerationAsyncStorage:()=>S});var s={};t.r(s),t.d(s,{POST:()=>l,runtime:()=>d});var o=t(7506),i=t(5624),n=t(1301),a=t(3092),p=t(50),u=t(6113),c=t.n(u);let d="nodejs";async function l(e){let{data:r,name:t}=await e.json(),s=await x(r),o=c().createHash("sha256").update(r).digest("hex"),i=function(){let e=process.env.SUPABASE_URL||process.env.NEXT_PUBLIC_SUPABASE_URL,r=process.env.SUPABASE_SERVICE_ROLE||process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&r?(0,p.eI)(e,r):null}();if(!i)return a.NextResponse.json({vault:{name:t,cid:s,checksum:o,mock:!0}});let{data:n,error:u}=await i.from("vaults").insert({name:t,cid:s,checksum:o}).select().single();if(u)return a.NextResponse.json({error:u.message},{status:500});let{error:d}=await i.from("audit_logs").insert({action:"vault.create",subject:t,meta:{cid:s}});return d?a.NextResponse.json({error:d.message},{status:500}):a.NextResponse.json({vault:n})}async function x(e){if(process.env.PINATA_JWT){let r=await fetch("https://api.pinata.cloud/pinning/pinJSONToIPFS",{method:"POST",headers:{Authorization:`Bearer ${process.env.PINATA_JWT}`,"Content-Type":"application/json"},body:JSON.stringify({data:e})});return(await r.json()).IpfsHash}if(process.env.WEB3_STORAGE_TOKEN){let r=await fetch("https://api.web3.storage/upload",{method:"POST",headers:{Authorization:`Bearer ${process.env.WEB3_STORAGE_TOKEN}`,"Content-Type":"application/json"},body:JSON.stringify({data:e})});return(await r.json()).cid}return"QmMockCID"+Date.now()}let f=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/ipfs/pin/route",pathname:"/api/ipfs/pin",filename:"route",bundlePath:"app/api/ipfs/pin/route"},resolvedPagePath:"/Users/bfh/gTek-SaaS_GLOBAL-ENTERPRISE-TEMPLATES-WEBSITE/apps/gtek-web/app/api/ipfs/pin/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:S,serverHooks:E}=f,A="/api/ipfs/pin/route";function T(){return(0,n.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:S})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[202,151,50],()=>t(5645));module.exports=s})();